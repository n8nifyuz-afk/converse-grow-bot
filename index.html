<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no"
    />
    <title>ChatLearn - AI Chat Platform</title>
    <meta name="description" content="ChatLearn - Your intelligent AI chat platform for seamless conversations" />
    <meta name="author" content="ChatLearn" />
    <link rel="canonical" href="https://www.chatl.ai/" />
    <link rel="icon" href="https://www.chatl.ai/favicon.png" type="image/png" />
    <link rel="apple-touch-icon" href="https://www.chatl.ai/favicon.png" />

    <meta property="og:title" content="ChatLearn - AI Chat Platform" />
    <meta property="og:description" content="Your intelligent AI chat platform for seamless conversations" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://www.chatl.ai/" />
    <meta property="og:image" content="https://www.chatl.ai/og-image.png" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@chatlearn_ai" />
    <meta name="twitter:title" content="ChatLearn - AI Chat Platform" />
    <meta name="twitter:description" content="Your intelligent AI chat platform for seamless conversations" />
    <meta name="twitter:image" content="https://www.chatl.ai/og-image.png" />

    <!-- HEAD ichida eng yuqoriga qo'ying -->
    <script
      id="Cookiebot"
      src="https://consent.cookiebot.com/uc.js"
      data-cbid="cc9cba1a-5783-4a8d-ba42-f4f1961b15a4"
      data-blockingmode="auto"
      type="text/javascript"
    ></script>

    <!-- Google Consent Mode - just analytics & conversion tracking, no Cookiebot -->
    <script>
      window.dataLayer = window.dataLayer || [];
      window.gtag = function () { dataLayer.push(arguments); };

      gtag('consent', 'default', {
        'analytics_storage': 'denied',
        'ad_user_data': 'denied',
        'ad_storage': 'denied',
        'ad_personalization': 'denied',
        'functionality_storage': 'denied',
        'personalization_storage': 'denied',
        'security_storage': 'granted',
        'wait_for_update': 500
      });

      gtag('set', 'ads_data_redaction', true);
      gtag('set', 'url_passthrough', true);
      gtag('set', 'allow_ad_personalization_signals', false);

      gtag('js', new Date());
    </script>
  </head>

  <body>
    <div id="root"></div>

    <!-- React app -->
    <script type="module" src="/src/main.tsx"></script>

    <!-- Tracking scripts (GTM + GA4) -->
    <script>
      (function() {
        function loadTracking() {
          // Google Tag Manager
          (function(w,d,s,l,i){
            w[l]=w[l]||[];
            w[l].push({'gtm.start': new Date().getTime(), event:'gtm.js'});
            var f=d.getElementsByTagName(s)[0],
                j=d.createElement(s),
                dl=l!='dataLayer'?'&l='+l:'';
            j.async=true;
            j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;
            f.parentNode.insertBefore(j,f);
          })(window,document,'script','dataLayer','GTM-NMLGMTL5');

          // Google Analytics / Ads
          var gtagScript = document.createElement('script');
          gtagScript.async = true;
          gtagScript.src = 'https://www.googletagmanager.com/gtag/js?id=AW-16917874636';

          gtagScript.onload = function() {
            window.gtag('config', 'AW-16917874636');
            window.gtag('config', 'G-EDSR82W70J');
          };

          document.head.appendChild(gtagScript);
        }

        function shouldLoadByCookiebot() {
          try {
            if (window.Cookiebot && window.Cookiebot.consent) {
              return !!(window.Cookiebot.consent.statistics || window.Cookiebot.consent.marketing);
            }
            return false;
          } catch(e) {
            return false;
          }
        }

        function waitForConsentThenLoad() {
          if (shouldLoadByCookiebot()) {
            actuallyLoadTracking();
            return;
          }

          var waited = 0;
          var interval = setInterval(function() {
            if (shouldLoadByCookiebot()) {
              clearInterval(interval);
              actuallyLoadTracking();
            } else {
              waited += 500;
              if (waited > 20000) {
                clearInterval(interval);
              }
            }
          }, 500);
        }

        if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', loadTracking);
        } else {
          loadTracking();
        }

        if (window.addEventListener) {
          window.addEventListener('CookiebotOnAccept', function(){
            waitForConsentThenLoad();
          }, false);
        }

      })();
    </script>
  </body>
</html>
