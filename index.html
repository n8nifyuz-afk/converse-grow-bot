<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no"
    />
    <!-- <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://accounts.google.com https://accounts.youtube.com https://www.google.com https://www.gstatic.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://accounts.google.com https://www.google.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https: blob:; connect-src 'self' blob: data: https://*.supabase.co https://accounts.google.com https://www.google.com https://*.google.com https://speech.googleapis.com https://www.gstatic.com https://*.n8n.cloud wss://*.supabase.co; frame-src 'self' https://accounts.google.com https://www.google.com; worker-src 'self' blob:;"> -->
    <title>ChatLearn - AI Chat Platform</title>
    <meta name="description" content="ChatLearn - Your intelligent AI chat platform for seamless conversations" />
    <meta name="author" content="ChatLearn" />
    <link rel="canonical" href="https://www.chatl.ai/" />
    <link rel="icon" href="https://www.chatl.ai/favicon.png" type="image/png" />
    <link rel="apple-touch-icon" href="https://www.chatl.ai/favicon.png" />

    <meta property="og:title" content="ChatLearn - AI Chat Platform" />
    <meta property="og:description" content="Your intelligent AI chat platform for seamless conversations" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://www.chatl.ai/" />
    <meta property="og:image" content="https://www.chatl.ai/og-image.png" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@chatlearn_ai" />
    <meta name="twitter:title" content="ChatLearn - AI Chat Platform" />
    <meta name="twitter:description" content="Your intelligent AI chat platform for seamless conversations" />
    <meta name="twitter:image" content="https://www.chatl.ai/og-image.png" />

    <!-- COOKIEBOT -->
    <script
      id="Cookiebot"
      src="https://consent.cookiebot.com/uc.js"
      data-cbid="cc9cba1a-5783-4a8d-ba42-f4f1961b15a4"
      data-blockingmode="auto"
      type="text/javascript"
    ></script>

    <!-- GA/GTM  -->
    <script
      type="text/plain"
      data-cookieconsent="statistics"
      data-src="https://www.googletagmanager.com/gtag/js?id=G-EDSR82W70J"
    ></script>
    <script
      type="text/plain"
      data-cookieconsent="statistics"
      data-src="https://www.googletagmanager.com/gtm.js?id=GTM-NMLGMTL5"
    ></script>

    <!-- WAIT for Cookiebot, then initialise gtag and sync consent -->
    <script>
      // Inits
      window.dataLayer = window.dataLayer || [];
      window.gtag = function(){ dataLayer.push(arguments); };

      // Wait for Cookiebot API, then load GA and set consent according to Cookiebot
      (function waitForCookiebot(){
        if (!window.Cookiebot) { return setTimeout(waitForCookiebot, 200); }

        if (window.Cookiebot.forceShow) { window.Cookiebot.forceShow(); }
        else if (window.Cookiebot.show) { window.Cookiebot.show(true); }

        // Load gtag script element from data-src (so Cookiebot doesn't auto-load it)
        const gtagScript = document.querySelector('script[data-src*="gtag/js?id"]');
        if (gtagScript && !gtagScript.src) {
          gtagScript.src = gtagScript.getAttribute('data-src');
          document.head.appendChild(gtagScript);
          // After script loads, call gtag init and sync consent from Cookiebot
          gtagScript.onload = function(){
            const analyticsAllowed = !!(window.Cookiebot && window.Cookiebot.consent && window.Cookiebot.consent.statistics);
            gtag('consent', 'default', {
              'analytics_storage': analyticsAllowed ? 'granted' : 'denied',
              'ad_storage': analyticsAllowed ? 'granted' : 'denied'
            });
            gtag('js', new Date());
            gtag('config', 'G-EDSR82W70J', { 'send_page_view': analyticsAllowed });
          };
        }
      })();
    </script>

    <!-- CSS: faqat Cookiebot dialog elementiga ta'sir qilsin (skript taglar emas) -->
    <style>
      #CybotCookiebotDialog, .CybotCookiebotDialog {
        position: fixed !important;
        z-index: 2147483647 !important;
      }
    </style>
  </head>

  <body>
    <div id="root"></div>

    <!-- Load React app FIRST -->
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
